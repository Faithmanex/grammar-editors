<!DOCTYPE html>
<html>
<head>
	<title>Order Request Form</title>
</head>
<body>
	<h1>Order Request Form</h1>
	<form id="order-form" method="post" enctype="multipart/form-data">
		<label for="name">Name:</label>
		<input type="text" id="name" name="name" required><br><br>
		<label for="email">Email:</label>
		<input type="email" id="email" name="email" required><br><br>
		<label for="phone">Phone:</label>
		<input type="tel" id="phone" name="phone" required><br><br>
		<label for="file">File:</label>
        <input type="file" id="fileInput"><br><br>
		<label for="message">Message:</label><br>
		<textarea id="message" name="message" rows="5" cols="30"></textarea><br><br>
		<button type="submit" id="submit-btn"  onclick="sendFile()"> Submit</button>
	</form>
<!-- Send Form -->
	<script>
		const form = document.getElementById('order-form');
		const submitBtn = document.getElementById('submit-btn');

		form.addEventListener('submit', (event) => {
			event.preventDefault();
			submitBtn.innerHTML = 'Submitting...';
			submitBtn.disabled = true;

			const formData = new FormData(form);
			const xhr = new XMLHttpRequest();

			xhr.open('POST', 'https://api.telegram.org/bot5313824526:AAEI3MgZNSxfGmExZCB8srsgh_4c_gC6sDc/sendMessage');
			xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xhr.onreadystatechange = function() {
				if (xhr.readyState === 4 && xhr.status === 200) {
					alert('Your order request has been sent successfully!');
					form.reset();
					submitBtn.innerHTML = 'Submit';
					submitBtn.disabled = false;
				}
			};
			xhr.send(`chat_id=2040461515&text=Name: ${formData.get('name')}%0AEmail: ${formData.get('email')}%0APhone: ${formData.get('phone')}%0AMessage: ${formData.get('message')}`);
		});

// Send File
        function sendFile() {
        const input = document.getElementById('fileInput');
        const file = input.files[0];
        if (!file) {
          console.error('No file selected');
          return;
        }
        const formData = new FormData();
        formData.append('document', file);
        const botToken = '5313824526:AAEI3MgZNSxfGmExZCB8srsgh_4c_gC6sDc';
        const chatId = '2040461515';
        const xhr = new XMLHttpRequest();
        xhr.open('POST', `https://api.telegram.org/bot${botToken}/sendDocument?chat_id=${chatId}`);
        xhr.onreadystatechange = function() {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              console.log('File sent successfully');
            } else {
              console.error(`Failed to send file: ${xhr.statusText}`);
            }
          }
        };
        xhr.onerror = function() {
          console.error('Network error');
        };
        xhr.send(formData);
      }
	</script>
</body>
</html>
